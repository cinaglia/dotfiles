#!/bin/bash

sessions=$(
  tmux list-sessions -F '#{session_name};#{session_windows} windows;#{?session_attached,(attached),}' |
  column -s\; -t |
  awk '{print "["NR-1"]", $0}'
)

target=$(echo "$sessions" | fzf --reverse --exact | awk '{ print $2}') || exit 0

if [ $target ]; then
  tmux switch-client -t $target
fi
